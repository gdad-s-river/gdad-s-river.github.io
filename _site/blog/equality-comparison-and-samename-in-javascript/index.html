<!doctype html>

<html lang="en">

  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="http://localhost:4000/assets/css/style.css">
    <script src="http://localhost:4000/assets/js/scripts.js"></script>
    
    <title>Equality Comparisons and Sameness in Javascript | My Blog</title>
  </head>

<body >

<header>

  <h1 class="logo">
    <a href="http://localhost:4000"><span>My Blog</span></a>
  </h1>

  <div class="description">This is my blog where I post stuff</div>

  <nav>

  <ul>
    <li><a href="http://localhost:4000">Home</a></li>
    <li><a href="http://localhost:4000/about.html">About Me</a></li>
    <li><a href="http://twitter.com/mytwitteraccount">Follow me on Twitter</a></li>
  </ul>

</nav>

</header>

<main>
  <article class="single">

  <header>
    <h2>Equality Comparisons and Sameness in Javascript</h2>

      

      <div class="meta">by Me on May 27, 2016</div>

      

  </header>

  <div class="content">
    <p>This is the piece of code that <a href="https://www.codechef.com/">CodeChef</a> shared on their <a href="https://www.facebook.com/CodeChef/">facebook page</a> <a href="https://www.facebook.com/CodeChef/photos/a.10150302285647799.346300.53227312798/10153675104012799/?type=3&amp;theater">here</a>. To write the code snippet down:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s1">''</span><span class="p">];</span>
<span class="c1">// undefined</span>
<span class="o">&gt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>                  <span class="c1">//1</span>
<span class="c1">// ['']</span>
<span class="o">&gt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">===</span> <span class="p">[</span><span class="s1">''</span><span class="p">]</span>
<span class="c1">// false</span>
<span class="o">&gt;</span> <span class="k">typeof</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
<span class="s1">'object'</span>
<span class="o">&gt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="s1">''</span>            <span class="c1">//2</span>
<span class="c1">// true</span>
<span class="c1">//WTF!</span>
</code></pre>
</div>

<p>Now I had never had programmed before 1 year, so I still jump in ecastacy on the ‘aha!’ moments a programming language has to offer. Many of them for javascript came from <a href="http://getify.me/">Kyle Simpson</a>. One came today from the code snippet above, that an <a href="https://www.facebook.com/shreysaroch?fref=ts">acquaintance</a> happened to share. First I was very surprised by (1), because it was an array with an empty string element being checked for another such array. Turns out they are <strong>two different object references being compared</strong> so obviously they won’t come true. Infact</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;</span> <span class="p">[]</span> <span class="o">==</span> <span class="p">[]</span>
<span class="c1">// false</span>
<span class="o">&gt;</span> <span class="p">{}</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c1">// false</span>
</code></pre>
</div>

<p>Call me stupid, or a slow learner, I didn’t know this. Thanks to <a href="https://www.facebook.com/giriraj.sharma27?fref=ufi">Giri Bhai</a> he told me everything about the code snippet above. The second thing that I didn’t know about (2) was that since on the LHS there’s an object (<code class="highlighter-rouge">a.slice(-1)</code>) being compared to RHS’s string (<code class="highlighter-rouge">''</code>), the javascript works such that it automatically calls <code class="highlighter-rouge">toString</code> method over the object over the inbuilt <code class="highlighter-rouge">==</code> function, so that object is converted to string, and so that the comparison could make sense. That’s why (2) is correct.</p>

<p>To quote the first line of <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Equality_comparisons_and_sameness">More detailed link to : <strong>Equality Comparisons and Sameness: MDN</strong></a> :</p>

<blockquote>
  <p>Briefly, double equals will perform a type conversion when comparing two things; triple equals will do the same comparison without type conversion (by simply always returning false if the types differ)</p>
</blockquote>

<p>I became so anxious about knowing why is that the code snippet above was behaving as it was, that like I always do, I started asking on as many platforms and places I could: on javascript IRC channel, twitter, fb, office colleagues etc. <a href="https://www.facebook.com/arihantverma/posts/1319880568076896">This</a> is the facebook thread of comments that eventually produced the answer.</p>

<p>If you like that I’m exploring things I didn’t know and want to give me thumbs up or pats on the back, or if you would just want to bully me for my lack of basic knowledge, please tweet me at <a href="https://twitter.com/gdad_s_river">@gdad_s_river</a>. I’d love to learn about what you are doing and learning, and learn from it, and perhaps I might be able to tell you a thing or two.</p>


    

    <a class="button share-button" href="http://twitter.com/share?text=Equality Comparisons and Sameness in Javascript&amp;url=http://localhost:4000/blog/equality-comparison-and-samename-in-javascript/&amp;via=mytwitteraccount" title="Share on Twitter" target="_blank">Share on Twitter</a>

<a class="button share-button" href="http://www.facebook.com/sharer.php?u=http://localhost:4000/blog/equality-comparison-and-samename-in-javascript/&amp;t=Equality Comparisons and Sameness in Javascript" title="Share on Facebook" target="_blank">Share on Facebook</a>
  </div>

</article>
</main>

<footer>
  <span class="copyright">&copy; 2016 My Blog</span>
</footer>

</body>

</html>